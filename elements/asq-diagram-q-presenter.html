<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../asq-base/asq-base.html">
<!--<link rel="import" href="../../iron-flex-layout/iron-flex-layout-classes.html">-->
<!--<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html">-->

<link rel="stylesheet" type="text/css" href="../../jointjs/dist/joint.css"/>

<!--
`asq-diagram-q-presenter` is use to show to the presenter.

@element asq-diagram-q-presenter
@demo demo/index.html
@group ASQ Elements
@blurb Element acting as an editor for diagram questions.
@homepage http://github.com/ASQ-USI-Elements/asq-diagram-q-presenter
-->
<dom-module id="asq-diagram-q-presenter">
  <template>

    <style></style>

    <content></content>
    <b>- PRESENTER</b>
  </template>

  <script>
    Polymer({
      is: 'asq-diagram-q-presenter',

      behaviors: [
        ASQ.asqElementBehavior
      ],

      listeners: {
        'click' : '_onBtnClicked'
      },

      hostAttributes: {
        'aria-checked': false,
        tabindex: 0
      },

      properties: {

        /**
         * Name of 'this' obj
         *  @type {String}
         */
        name: {
          type: String,
          notify: true,
          reflectToAttribute: true
        },

        eventBus: {
          type: Object,
          observer: "_eventBusChanged",
          notify: true,
        }

      },

      attached: function () {
        this._isReady = true;
      },

      _eventBusChanged: function (eventBus) {
        if (!eventBus) return;
        eventBus.on('asq:question_type', this._onQuestionType.bind(this));
      },

      _onQuestionType: function (evt) {
        if (!evt || !evt.questionType) return;

        console.log('_onQuestionType PRESENTER');
        console.log(evt);
        // // FIXME
        // // A strange problem: it will get an event twice
        // // with different `this`!!
        // if (this.items.length === 0) return;
        //
        // if (evt.questionType == 'asq-multi-choice-other-q') {
        //   if (evt.type == 'progress') {
        //     this._onProgress(evt);
        //   }
        //   else if (evt.type == 'restorePresenter') {
        //     this._onRestorePresenter(evt);
        //   }
        // }
      }

    });
  </script>

</dom-module>
